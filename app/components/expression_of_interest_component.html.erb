<h3 class="text-3xl font-bold mb-20"><%= t(".eoi_heading") %></h3>
<div
  class="mt-10 flex"
  data-controller="page-reload number-of-units"
  data-page-reload-url-value="<%= refresh_path %>"
  data-number-of-units-min-value="<%= eoi.minimum_units %>"
  data-number-of-units-max-value="<%= eoi.available_units %>"
>
  <div class="w-5/12">
    <%= property_image_with_details %>
  </div>

  <div class="w-7/12 border border-gray-200 p-8 relative">
    <h3 class="text-xl font-bold"><%= t(".review_eoi") %></h3>
    <p class="mt-4">
      <%== t(".review_message", units: pluralize(eoi.number_of_units, "unit"), unit_price: price_per_unit, name: eoi.name) %>
    </p>

    <div class="absolute bottom-8 inset-x-8">
      <%= form_with model: eoi, scope: eoi.scope, url: { action: "create", controller: :expression_of_interests }, data: {page_reload_target: :form} do |f|%>
        <div class="flex justify-between">
          <h4 class="text-lg font-semibold text-gray-500"><%= t(".eoi_summary") %></h4>
          <div
            class="px-2 py-1 rounded-full text-xs border border-green-500 cursor-pointer hidden hover:bg-green-500 hover:text-white"
            data-number-of-units-target="refreshPriceButton"
            data-action="click->page-reload#refreshWithParams"
          >refresh price</div>
        </div>
        <div>
          <ul class="flex mt-2 divide-x divide-gray-300">
            <li class="bg-gray-200 p-4 w-1/3">
              <div class="text-xs"><%= t(".units_to_acquire") %></div>
              <%= f.number_field :number_of_units,
                step: 1,
                value: eoi.number_of_units,
                min: eoi.minimum_units,
                max: eoi.available_units,
                class: "form-input pl-2",
                autofocus: true,
                data: {
                  action: "input->number-of-units#update",
                  paypal_payment_target: "unitsInput",
                  number_of_units_target: "unitsInput"
                }
              %>
            </li>
            <li class="bg-gray-200 p-4 w-1/3">
              <div class="text-xs"><%= t(".subtotal") %></div>
              <div class="text-xl"><%= eoi_subtotal %></div>
            </li>
            <li class="bg-gray-200 p-4 w-1/3">
              <div class="text-xs"><%= t(".eoi_fee") %></div>
              <div class="text-xl"><%= eoi_fee %></div>
            </li>
            <li class="bg-gray-200 p-4 w-1/3">
              <div class="text-xs"><%= t(".grand_total") %></div>
              <div class="text-3xl font-semibold"><%= eoi_grand_total %></div>
            </li>
          </ul>
          <div class="mt-4">
            <%= render Ui::PrimaryButtonComponent.new(
              title: t(".eoi_button"),
              rounded: true,
              full_width: true,
              data: { number_of_units_target: "eoiButton" }
            ) %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
<div class="mt-4 text-gray-500 text-sm"><%== t(".disclaimer") %></div>
